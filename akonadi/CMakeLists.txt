project(akonadi_playground)

#add_definitions( -DQT_NO_CAST_FROM_ASCII )
#add_definitions( -DQT_NO_CAST_TO_ASCII )

find_package(KDE4 REQUIRED)
find_package(Akonadi REQUIRED)
find_package(KdepimLibs REQUIRED)

include(KDE4Defaults)

set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${CMAKE_CURRENT_SOURCE_DIR}/cmake/modules/ )

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${KDE4_ENABLE_EXCEPTIONS}")

include_directories(
    akonadi_next
    ${AKONADI_INCLUDE_DIR}
    ${KDE4_INCLUDES}
    ${KDEPIMLIBS_INCLUDE_DIR}
    ${QT_INCLUDES}
)


include(KDE4Defaults)
include(MacroLibrary)
include(MacroOptionalAddSubdirectory)
include(CheckIncludeFiles)
include(FindKdepimLibs)

add_subdirectory(akonadi_next)
add_subdirectory(mailthreader)

# http://gitorious.org/grantlee
find_package(Grantlee)

if (Grantlee_FOUND)
  message("Found Grantlee. Building KJots.")


  include_directories(
    kjots_common
  )

  add_subdirectory(akonaditemplateloader)
  add_subdirectory(akonaditemplateresource)

  add_subdirectory(example_mail)

  #### KJots commmon stuff ####
  add_subdirectory(kjots_common)

  add_subdirectory(kjots_serializer)

  add_subdirectory(kjots_resource)

  add_subdirectory(kjotsapp)
  add_subdirectory(kjots_plasmoid)
endif (Grantlee_FOUND)


#### Clients ####

add_subdirectory(filter)
add_subdirectory(akonadi_serializer_qimage)
add_subdirectory(example_contacts)
#add_subdirectory(example_rss)
